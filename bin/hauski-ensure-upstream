#!/usr/bin/env bash
set -euo pipefail

# Source the shared library
# shellcheck source=lib/common.sh
source "$(dirname "$0")/../lib/common.sh"

if git rev-parse --is-inside-work-tree >/dev/null 2>&1; then
  BRANCH="$(git rev-parse --abbrev-ref HEAD)"
  validate_name "${BRANCH}"
  if ! git rev-parse --verify "@{u}" >/dev/null 2>&1; then
    git push -u origin "${BRANCH}" || true
  fi
fi
